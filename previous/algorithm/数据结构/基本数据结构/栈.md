# æ•°æ®ç»“æ„

- åªèƒ½ä»æ•°æ®ç»“æ„çš„ä¸€ç«¯è¿›è¡Œæ“ä½œï¼Œå…ˆè¿›åå‡º
- å¯è‡ªåŠ¨æ‰©å®¹

![image-20231016113311031](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231016113311031.png)

```java
package com.citi.stack;

public interface MyStack {
    void push(int val);

    int pop();

    int peek();

    boolean isEmpty();
    
    int size();
}
```

## æ ˆå®ç°

### é“¾è¡¨

- å•å‘å¸¦å“¨å…µé“¾è¡¨ï¼Œå¤´æ’å¤´å‡º

![image-20231016115640568](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231016115640568.png)

```java
class ErickLinkedStack {
    static class Node {
        int val;
        Node next;

        public Node(int val, Node next) {
            this.val = val;
            this.next = next;
        }
    }

    int size = 0;

    private Node sentinel = new Node(-999, null);

    public void push(int val) {
        sentinel.next = new Node(val, sentinel.next);
        size++;
    }

    public int pop() {
        if (size == 0) {
            throw new NoSuchElementException();
        }
        Node ele = sentinel.next;
        sentinel.next = ele.next;
        size--;
        return ele.val;
    }

    public int peek() {
        if (size == 0) {
            throw new NoSuchElementException();
        }
        return sentinel.next.val;
    }

    public boolean isEmpty() {
        return size == 0;
    }

    public int size() {
        return size;
    }
}
```

### æ•°ç»„

- å¯ä»¥ä¸æŒ‡å®šæ•°ç»„é•¿åº¦ï¼Œé€šè¿‡æ‰©ç¼©å®¹æ¥å®ç°

![image-20231202101646696](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231202101646696.png)

```java
package com.citi.stack;

import java.util.NoSuchElementException;

public class ArrayStack implements MyStack {
    int[] arr;

    int top = 0;

    public ArrayStack(int capacity) {
        arr = new int[capacity];
    }

    @Override
    public boolean push(int val) {
        if (isFull()) {
            return false;
        }
        arr[top] = val;
        top++;
        return true;
    }

    @Override
    public int pop() {
        if (isEmpty()) {
            throw new NoSuchElementException("Empty Stack");
        }
        int result = arr[top - 1];
        arr[top - 1] = -999;
        top--;
        return result;
    }

    @Override
    public int peek() {
        if (isEmpty()) {
            throw new NoSuchElementException("Empty Stack");
        }
        return arr[top - 1];
    }

    @Override
    public boolean isEmpty() {
        return top == 0;
    }

    @Override
    public boolean isFull() {
        return top == arr.length;
    }
}
```

## JDKå®ç°

### LinkedList

- åº•å±‚æ˜¯ç”¨é“¾è¡¨å®ç°

### ArrayDeque

- åº•å±‚ç”¨æ•°ç»„å®ç°

## è®¾è®¡

### âœ… [232. ç”¨æ ˆå®ç°é˜Ÿåˆ—](https://leetcode.cn/problems/implement-queue-using-stacks/)

![image-20231018120502207](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231018120502207.png)

- å‡ºçš„æ—¶å€™ï¼Œå…ˆæŠŠå½“å‰çš„outStackä¸­å‡ºå®Œï¼Œå†å»å€’æ‰‹

```java
class MyQueue {

    private LinkedList<Integer> inStack = new LinkedList<>();
    private LinkedList<Integer> outStack = new LinkedList<>();

    public MyQueue() {
    }

    public void push(int x) {
        inStack.push(x);
    }

    public int pop() {
        if (outStack.isEmpty()) {
            revert();
        }
        return outStack.pop();
    }

    public int peek() {
        if (outStack.isEmpty()) {
            revert();
        }
        return outStack.peek();
    }

    private void revert() {
        while (!inStack.isEmpty()) {
            outStack.push(inStack.pop());
        }
    }

    public boolean empty() {
        return inStack.isEmpty() && outStack.isEmpty();
    }
}
```

### âœ… [225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ](https://leetcode.cn/problems/implement-stack-using-queues/)

![image-20231202135602075](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231202135602075.png)

```java
class MyStack {
    private LinkedList<Integer> queue = new LinkedList<>();

    public MyStack() {
    }

    public void push(int x) {
        int size = queue.size();
        queue.offer(x);
        for (int i = 0; i < size; i++) {
            // revert
            queue.offer(queue.poll());
        }
    }

    public int pop() {
        if (!queue.isEmpty()) {
            return queue.poll();
        }
        return -1;
    }

    public int top() {
        if (!queue.isEmpty()) {
            return queue.peek();
        }
        return -1;
    }

    public boolean empty() {
        return queue.isEmpty();
    }
}
```

### ğŸ˜ [155. æœ€å°æ ˆ](https://leetcode.cn/problems/min-stack/)

- å…³é”®é—®é¢˜ï¼špopå‡ºå»åï¼Œæœ€å°å€¼å¦‚ä½•æ›´æ–°ï¼Œå› æ­¤ä¸èƒ½ç”¨minå¸¸é‡æ¥è®°å½•

![image-20240206112243364](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20240206112243364.png)

```java
class MinStack {

    private LinkedList<Integer> stack = new LinkedList<>();
    private LinkedList<Integer> minStack = new LinkedList<>();

    public MinStack() {
    }

    public void push(int val) {
        stack.push(val);

        if (minStack.isEmpty()) {
            minStack.push(val);
        } else {
            minStack.push(Math.min(minStack.peek(), val));
        }
    }

    public void pop() {
        if (!stack.isEmpty()) {
            stack.pop();
            minStack.pop();
        }
    }

    public int top() {
        if (!stack.isEmpty()) {
            return stack.peek();
        }
        return -1;
    }

    public int getMin() {
        if (!stack.isEmpty()) {
            return minStack.peek();
        }
        return -1;
    }
}
```



# LeetCode

## âœ… [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/valid-parentheses/)

### æ ˆ

- éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœå·¦è¾¹ç¬¦å·ï¼Œåˆ™å…¥æ ˆå¦ä¸€åŠå­—ç¬¦ï¼›
- å¦‚æœå³è¾¹ï¼Œåˆ™å‡ºæ ˆå¹¶æ¯”è¾ƒ

```bash
# [()] ,   ((,   ))
```

```java
public boolean isValid(String s) {
    LinkedList<Character> stack = new LinkedList<>();
    char[] chs = s.toCharArray();
    for (int i = 0; i < chs.length; i++) {
        char ch = chs[i];
        if (ch == '(') {
            stack.push(')');
        } else if (ch == '[') {
            stack.push(']');
        } else if (ch == '{') {
            stack.push('}');
        } else {
            if (stack.isEmpty() || stack.pop() != ch) {
                return false;
            }
        }
    }
    return stack.isEmpty();
}
```

## âœ… [844. æ¯”è¾ƒå«é€€æ ¼çš„å­—ç¬¦ä¸²](https://leetcode.cn/problems/backspace-string-compare/)

### æ ˆ

```bash
# æ—¶é—´å¤æ‚åº¦ï¼š O(M+N)
# ç©ºé—´å¤æ‚åº¦ï¼š O(M+N)
```

```java
private LinkedList<Character> getResult(String s) {
    LinkedList<Character> stack = new LinkedList<>();
    char[] chs = s.toCharArray();
    for (int i = 0; i < chs.length; i++) {
        char ch = chs[i];
        if (ch == '#') {
            if (!stack.isEmpty()) {
                stack.pop();
            }
        } else {
            stack.push(ch);
        }
    }

    return stack;
}

public int searchInsert(int[] nums, int target) {
    int left = 0;
    int right = nums.length - 1;
    while (left <= right) {
        int middle = (left + right) / 2;
        if (target < nums[middle]) {
            right = middle - 1;
        } else if (nums[middle] < target) {
            left = middle + 1;
        } else {
            return middle;
        }
    }

    return left;
}
```

## ä¸­ç¼€è¡¨è¾¾å¼

### ğŸ˜ [150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼](https://leetcode.cn/problems/evaluate-reverse-polish-notation/)

- <font color=orange>åç¼€è¡¨è¾¾å¼</font>ï¼šè¿ç®—ç¬¦å·åœ¨æ•°å­—çš„åé¢ï¼Œè¿™æ ·å°±ä¸ç”¨è€ƒè™‘ä¼˜å…ˆçº§é—®é¢˜
- JVMçš„è¿ç®—æŒ‡ä»¤å°±æ˜¯è¿™ä¹ˆç©çš„
- ä¸å¸¦æ‹¬å·

```bash
["2","1","+","3","*"]
```

#### æ ˆ

- ç¢°è§ç¬¦å·å°±æŠŠå‰é¢ä¸¤ä¸ªæ•°å­—å¼¹å‡ºæ ˆ
- è¿ç®—å®Œæˆåé‡æ–°å…¥æ ˆ

```java
// String[] tokens: å‡ ä½æ•°å­—ï¼Œæ ¹æ®æ•°ç»„æ¥è¿›è¡ŒåŒºåˆ†
public int evalRPN(String[] tokens) {
    LinkedList<String> stack = new LinkedList<>();
    Set<String> set = new HashSet<>();
    set.add("+");
    set.add("-");
    set.add("*");
    set.add("/");
    for (int i = 0; i < tokens.length; i++) {
        String token = tokens[i];
        if (set.contains(token)) {
            String second = stack.pop();
            String first = stack.pop();
            if (token.equals("+")) {
                stack.push(String.valueOf(Integer.parseInt(first) + Integer.parseInt(second)));
            } else if (token.equals("-")) {
                stack.push(String.valueOf(Integer.parseInt(first) - Integer.parseInt(second)));
            } else if (token.equals("*")) {
                stack.push(String.valueOf(Integer.parseInt(first) * Integer.parseInt(second)));
            } else if (token.equals("/")) {
                stack.push(String.valueOf(Integer.parseInt(first) / Integer.parseInt(second)));
            }
        } else {
            stack.push(token);
        }
    }
    return Integer.parseInt(stack.pop());
}
```

### ğŸ˜ ä¸­ç¼€è½¬åç¼€

- å¯é€šè¿‡åŸºæœ¬è®¡ç®—å™¨IIæ¥éªŒè¯

![image-20231202132427456](https://erick-typora-image.oss-cn-shanghai.aliyuncs.com/img/image-20231202132427456.png)

```java
public String[] convert(String[] tokens) {
    LinkedList<String> stack = new LinkedList<>();
    Map<String, Integer> priority = getPriority();
    // åç¼€è¡¨è¾¾token
    String[] convertedTokens = new String[tokens.length];
    int idx = 0;

    for (int i = 0; i < tokens.length; i++) {
        String token = tokens[i];
        if (!priority.containsKey(token)) {
            convertedTokens[idx] = token;
            idx++;
        } else {
            /*å’Œæ ˆå†…å…ƒç´ æ¯”è¾ƒ*/
            while (!stack.isEmpty() && priority.get(stack.peek()) >= priority.get(token)) {
                String pop = stack.pop();
                convertedTokens[idx] = pop;
                idx++;
            }
            stack.push(token);
        }
    }

    /*å°†æ ˆæ¸…ç©º*/
    while (!stack.isEmpty()) {
        String pop = stack.pop();
        convertedTokens[idx] = pop;
        idx++;
    }
    return convertedTokens;
}

private Map<String, Integer> getPriority() {
    Map<String, Integer> priority = new HashMap<>();
    priority.put("+", 10);
    priority.put("-", 10);
    priority.put("*", 20);
    priority.put("/", 20);
    return priority;
}
```
