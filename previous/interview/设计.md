# 接口幂等性

- 同样的请求被重复执行多次，产生的结果与执行一次的结果相同。
- 接口无论被调用一次还是多次，系统的最终状态保持不变

## 业务逻辑

### 查询类(GET)

- 天然幂等，查询操作是读操作

### 删除类(DELETE)

- 多次调用删除同一资源，最终结果是资源被删除，所以也是幂等

### 创建(POST)

- 天然不幂等，多次创建相同资源可能导致数据重复，需要特殊处理

### 更新(PUT)

- 如果更新同一资源，结果相同，也是幂等

## 唯一标识

- 数据修改的请求时，客户端可以生成一个唯一标识（Idempotency Key），服务器根据这个标识判断是否已经处理过相同的请求
- 每次请求携带相同的标识，服务器若检测到该标识已存在，则直接返回之前的响应结果

## 去重机制

- 服务器可以记录每个请求的操作日志，防止同一请求在一定时间内被多次执行。通过检查日志确定是否已经处理过该请求

## 数据库唯一约束

- 在数据库层面通过设置唯一约束来保证幂等性。
- 例如，为数据库中的某些字段（如订单编号、交易编号等）设置唯一性约束，防止重复插入

